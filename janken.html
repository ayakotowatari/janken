<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/style.css">
<title>じゃんけん</title>
</head>
<body>

<!-- ロード直後の画面 -->

<div class="start text-center">

  <div class="start-img">
    <div>
      <img src="img/goo/goo.png" alt="" class="img-jkn">
    </div>
    <div>
      <img src="img/choki/choki.png" alt="" class="img-jkn">
    </div> 
    <div>
      <img src="img/par/par.png" alt="" class="img-jkn">
    </div>
  </div>
  <p id="btn-start" class="btn-start">start</p>
</div>

<!-- 
グー:0
チョキ:1
パー:2 
-->
<div class="main-body">
  <div class="text-center">
    <h1 class="main-title">じゃんけんゲーム</h1>
    <p id="judgment" class="sub-title">さきに３点とったら勝ち！</p>

  <div class="count">
    <div id="myCount" class="count-num">0</div>
    <div class="vs">vs</div>
    <div id="pcCount" class="count-num">0</div>
  </div>  
   <!-- 自分の手 -->
  <div class="jkn-hands text-center">
    <ul class="my-hands">
      <li class="btn" value=0>
        <img src="img/goo/goo.png" alt="" class="img-jkn">
      </li>  
      <li class="btn" value=1>
        <img src="img/choki/choki.png" alt="" class="img-jkn">
      </li>
      <li class="btn" value=2>
        <img src="img/par/par.png" alt="" class="img-jkn">
      </li>
    </ul>

    <!-- コンピューターの手 -->
    <ul class="pc-hands">
      <li>
        <img src="img/goo/goo.png" alt="" class="img-jkn goo">
      </li>
      <li>
        <img src="img/choki/choki.png" alt="" class="img-jkn choki">
      </li>
      <li>
        <img src="img/par/par.png" alt="" class="img-jkn par">
      </li>
    </ul>
  </div>
</div>

 <!-- 終了画面 -->

<div class="end">
  <p id="end-message" class="end-message"></p> 
  <div id="btn-end" class="btn-end">finish</div>
</div>

<footer></footer>

<script type="text/javascript" src="js/rainyday.js-master/docs/js/rainyday.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>

$(".main-body").hide();
$(".start").hide();
$(".end").hide();

$(window).on("load",function(){
  $(".start").fadeIn(1000);
})

$("#btn-start").on("click",function(){
  $(".start").fadeOut(1000);
  $(".main-body").fadeIn(1000);
  setTimeout(function(){
    $(".goo,.choki,.par").animate({opacity:0},500)
  },1000);
})

//じゃんけん用のSCRIPTを書いてください

let [myCount,pcCount] = [0, 0];

$(".btn").on("click",function(){
  let my_hand = $(this).val();
  // console.log(my_hand);
  let pc_hand = Math.floor(Math.random()*3);
  // console.log(pc_hand);
  const result = (my_hand-pc_hand+3)%3;

  if(pc_hand == 0){
    $(".goo").css("opacity","1");
    setTimeout(function(){
      $(".goo").css("opacity","0")
    },1500);
  }else if(pc_hand == 1){
    $(".choki").css("opacity","1");
    setTimeout(function(){
      $(".choki").css("opacity","0")
    },1500);
  }else{
    $(".par").css("opacity","1");
    setTimeout(function(){
      $(".par").css("opacity","0")
    },1500);
  }

  if(result == 1){
    $("#judgment").html("lose...").css("text-transform","capitalize");
    pcCount++;
  }else if (result == 2){
    $("#judgment").html("win!").css("text-transform","capitalize");
    myCount++;
  }else{
    $("#judgment").html("try again!").css("text-transform","capitalize");
  }

  $("#myCount").html(myCount);
  $("#pcCount").html(pcCount);

  if(myCount >= 3 || pcCount >= 3){
    const opacity = {"opacity":"0"}
    const background = {
        'background-image':'url("img/background.png")',
        'background-repeat':'no-repeat',
        // 'background-size':'contain'

    }
      
    $(".jkn-hands").fadeOut();
    $(".main-title").css(opacity);
    $(".sub-title").css(opacity);
    $(".count").css(opacity);
    $(".end").fadeIn();
    $("body").css("color","white");

    if(myCount == 3){
    $("#end-message").html("おめでとう！<br>あなたの勝ち。");
    $("body").css("background-color","#f37972");
    }else{
    $("#end-message").html("残念！<br>あなたの負け。");
    $("body").css(background);
    }
  }
});

$("#btn-end").on("click",function(){
  location.reload();
})

// if (my_hand == pc_hand){
  //   $("#judgment").html("おあいこです。");
  // }else if (my_hand == 0){
  //   if (pc_hand == 1){
  //     $("#judgment").html("あなたの勝ちです！");
  //   }else if (pc_hand == 2){
  //     $("#judgment").html("あなたの負けです！");
  //   }
  // }else if (my_hand == 1){
  //   if (pc_hand == 2){
  //     $("#judgment").html("あなたの勝ちです！");
  //   }else if (pc_hand == 0){
  //     $("#judgment").html("あなたの負けです！");
  //   }
  // }else if (my_hand == 2){
  //   if (pc_hand == 0){
  //     $("#judgment").html("あなたの勝ちです！");
  //   }else if (pc_hand == 1){
  //     $("#judgment").html("あなたの負けです！");
  //   }
  // }

</script>
</body>
</html>

